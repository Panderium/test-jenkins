version: "3.4"
services:

  test_Back:
    image: ${REPOSITORY_PREPROD}/${test_Back_IMAGE}
    
    networks:
      - net
      - traefik_net
    deploy:
      placement:
        constraints:
          - node.hostname == ${test_Back_PREPROD}
      labels:
        traefik.frontend.rule: Host:${test_Back_URL}.preprod.${DNS}
        traefik.port: ${test_Back_PORT}
        traefik.enable: "true"
        traefik.docker.network: traefik_net

networks:
   net:
   traefik_net:
    external: true

